# Настройка Telegram бота для SCHMIDT Cars

## Текущий статус

Из анализа JSON ответа видно, что:
- ✅ Бот создан и работает
- ✅ Бот добавлен в группу "Ivan & Игорь" (ID: -4785642266)
- ✅ Бот получает сообщения и команды
- ❌ Нужно настроить переменные окружения

## Шаги для настройки

### 1. Создать файл .env.local

Создайте файл `.env.local` в корне проекта `car-east-premium/`:

```bash
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=-4785642266
```

### 2. Получить токен бота

1. Найдите @BotFather в Telegram
2. Отправьте команду `/mybots`
3. Выберите вашего бота
4. Нажмите "API Token" или отправьте `/token`
5. Скопируйте токен и вставьте в `TELEGRAM_BOT_TOKEN`

### 3. Проверить Chat ID

Из вашего JSON видно, что Chat ID группы: `-4785642266`

Для подтверждения:
1. Отправьте сообщение в группу
2. Откройте: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
3. Найдите `chat.id` в ответе

### 4. Тестирование

После настройки переменных окружения:

1. Перезапустите сервер разработки:
   ```bash
   cd car-east-premium
   npm run dev
   ```

2. Откройте форму обратной связи на сайте
3. Введите номер телефона и отправьте заявку
4. Проверьте консоль сервера на наличие логов
5. Проверьте группу Telegram на наличие сообщения

## Структура JSON ответа

Ваш JSON содержит:
```json
{
  "ok": true,
  "result": [
    {
      "update_id": 63691554,
      "message": {
        "message_id": 4,
        "from": {
          "id": 950047133,
          "first_name": "Ivan",
          "last_name": "Koriako",
          "username": "ivan_koriako"
        },
        "chat": {
          "id": -4785642266,  // ← Это Chat ID группы
          "title": "Ivan & Игорь",
          "type": "group"
        },
        "text": "тест"
      }
    }
  ]
}
```

## Устранение неполадок

### Проблема: "Ошибка конфигурации"
- Проверьте, что файл `.env.local` создан в правильной папке
- Убедитесь, что переменные `TELEGRAM_BOT_TOKEN` и `TELEGRAM_CHAT_ID` установлены
- Перезапустите сервер после изменения переменных окружения

### Проблема: "Ошибка отправки сообщения"
- Проверьте, что бот добавлен в группу
- Убедитесь, что бот имеет права на отправку сообщений
- Проверьте токен бота на корректность

### Проблема: Сообщения не приходят в группу
- Проверьте Chat ID группы
- Убедитесь, что бот является администратором группы
- Проверьте логи в консоли сервера

## Полезные команды

### Получить информацию о боте
```
https://api.telegram.org/bot<BOT_TOKEN>/getMe
```

### Получить обновления
```
https://api.telegram.org/bot<BOT_TOKEN>/getUpdates
```

### Отправить тестовое сообщение
```
https://api.telegram.org/bot<BOT_TOKEN>/sendMessage?chat_id=-4785642266&text=Тест
``` 